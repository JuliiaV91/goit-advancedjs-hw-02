{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n\n\nconst startBtnEl = document.querySelector(\"[data-start]\");\nconst inputEl = document.querySelector(\"#datetime-picker\");\nstartBtnEl.disabled = true;\n\nlet userSelectedDate = null;\n\nconst timer = {\n    deadline: null,\n    intervalId: null,\n    elements: {\n        days: document.querySelector(\"[data-days]\"),\n        hours: document.querySelector(\"[data-hours]\"),\n        minutes: document.querySelector(\"[data-minutes]\"),\n        seconds: document.querySelector(\"[data-seconds]\"),\n    },\n\n    start() {\n        startBtnEl.disabled = true;\n        inputEl.disabled = true;\n\n        this.intervalId = setInterval(() => {\n            const diff = this.deadline.getTime() - Date.now();\n\n            if (diff <= 0) {\n                this.stop();\n                this.updateUI(0, 0, 0, 0);\n                iziToast.success({\n                    title: \"Timer Finished\",\n                    message: \"The countdown has reached the end!\",\n                    position: \"topRight\",\n                });\n                inputEl.disabled = false;\n                return;\n            }\n\n            const { days, hours, minutes, seconds } = this.convertMs(diff);\n            this.updateUI(days, hours, minutes, seconds);\n        }, 1000);\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n    },\n\n    updateUI(days, hours, minutes, seconds) {\n        this.elements.days.textContent = this.pad(days);\n        this.elements.hours.textContent = this.pad(hours);\n        this.elements.minutes.textContent = this.pad(minutes);\n        this.elements.seconds.textContent = this.pad(seconds);\n    },\n\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    },\n\n    pad(value) {\n        return String(value).padStart(2, \"0\");\n    },\n};\n\nflatpickr(\"#datetime-picker\", {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n\n    onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        if (!selectedDate || selectedDate <= new Date()) {\n            iziToast.error({\n                title: \"Invalid Date\",\n                message: \"Please choose a date in the future\",\n                position: \"topRight\",\n            });\n            startBtnEl.disabled = true;\n            return;\n        }\n\n        iziToast.success({\n            title: \"Valid Date\",\n            message: \"You can now start the countdown!\",\n            position: \"topRight\",\n        });\n\n        userSelectedDate = selectedDate;\n        timer.deadline = selectedDate;\n        startBtnEl.disabled = false;\n    },\n});\n\nstartBtnEl.addEventListener(\"click\", () => timer.start());\n"],"names":["startBtnEl","inputEl","timer","diff","iziToast","days","hours","minutes","seconds","ms","value","flatpickr","selectedDates","selectedDate"],"mappings":"+IAKA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,kBAAkB,EACzDD,EAAW,SAAW,GAItB,MAAME,EAAQ,CACV,SAAU,KACV,WAAY,KACZ,SAAU,CACN,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACnD,EAED,OAAQ,CACJF,EAAW,SAAW,GACtBC,EAAQ,SAAW,GAEnB,KAAK,WAAa,YAAY,IAAM,CAChC,MAAME,EAAO,KAAK,SAAS,QAAO,EAAK,KAAK,MAE5C,GAAIA,GAAQ,EAAG,CACX,KAAK,KAAI,EACT,KAAK,SAAS,EAAG,EAAG,EAAG,CAAC,EACxBC,EAAS,QAAQ,CACb,MAAO,iBACP,QAAS,qCACT,SAAU,UAC9B,CAAiB,EACDH,EAAQ,SAAW,GACnB,MACH,CAED,KAAM,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAK,KAAK,UAAUL,CAAI,EAC7D,KAAK,SAASE,EAAMC,EAAOC,EAASC,CAAO,CAC9C,EAAE,GAAI,CACV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,WAAa,IACrB,EAED,SAASH,EAAMC,EAAOC,EAASC,EAAS,CACpC,KAAK,SAAS,KAAK,YAAc,KAAK,IAAIH,CAAI,EAC9C,KAAK,SAAS,MAAM,YAAc,KAAK,IAAIC,CAAK,EAChD,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIC,CAAO,EACpD,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIC,CAAO,CACvD,EAED,UAAUC,EAAI,CAMV,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAC1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EACpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EACjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,EAED,IAAIE,EAAO,CACP,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,EAEAC,EAAU,mBAAoB,CAC1B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EACpC,GAAI,CAACC,GAAgBA,GAAgB,IAAI,KAAQ,CAC7CT,EAAS,MAAM,CACX,MAAO,eACP,QAAS,qCACT,SAAU,UAC1B,CAAa,EACDJ,EAAW,SAAW,GACtB,MACH,CAEDI,EAAS,QAAQ,CACb,MAAO,aACP,QAAS,mCACT,SAAU,UACtB,CAAS,EAGDF,EAAM,SAAWW,EACjBb,EAAW,SAAW,EACzB,CACL,CAAC,EAEDA,EAAW,iBAAiB,QAAS,IAAME,EAAM,MAAK,CAAE"}